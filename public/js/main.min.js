"use strict";var misFinanzas=angular.module("misFinanzas",["ngSanitize","ngAnimate","angular-inview","angular-svg-round-progress","ng.deviceDetector","misFinanzas.controllers","misFinanzas.services","misFinanzas.directives","misFinanzas.filters"]);misFinanzas.run(["$rootScope",function(a){a.api=misFinanzasAPI.url}]);var controllers=angular.module("misFinanzas.controllers",[]),services=angular.module("misFinanzas.services",[]);angular.module("misFinanzas.directives",[]),angular.module("misFinanzas.filters",[]);var BudgetsController=function(a,b,c){this.interval=a,this.filter=b,this.postsService=c};BudgetsController.prototype.showThem=function(a){var b=this;!a||b.isShown||b.isShownStarted||(b.isShownStarted=!0,b.postsService.getPosts("presupuesto").success(function(a){b.budgets=a,b.isShown=!0,b.dataLoaded=!0,b.startThem(b.budgets)}))},BudgetsController.prototype.startThem=function(a){var b=this;a&&a.length&&angular.forEach(a,function(a){a.meta.valor_inicial=1*a.meta.valor_inicial,a.meta.meta=1*a.meta.meta,a.meta.porcentaje=1*a.meta.porcentaje/100,b.interval(function(){a.meta.valor_inicial=a.meta.valor_inicial+1},4,a.meta.meta*a.meta.porcentaje)})},BudgetsController.prototype.getStyle=function(a,b,c){return c+": "+100*b/a+"%;"},BudgetsController.prototype.getClass=function(a,b){var c=this,d=b/a,e=c.filter("limitTo")(1/3,4);return e>=d?"green":d>e&&1>d?"yellow":"red"},BudgetsController.$inject=["$interval","$filter","postsService"],controllers.controller("BudgetsController",BudgetsController);var FeaturesController=function(a){this.postsService=a};FeaturesController.prototype.showThem=function(a){var b=this;!a||b.isShown||b.isShownStarted||(b.isShownStarted=!0,b.postsService.getPosts("caracteristica_p").success(function(a){b.features=a,b.isShown=!0,b.dataLoaded=!0}))},FeaturesController.$inject=["postsService"],controllers.controller("FeaturesController",FeaturesController);var GoalsController=function(a,b){this.interval=a,this.postsService=b};GoalsController.prototype.getClass=function(a,b){var c=100*b/a;return 25>=c?"red":c>25&&50>=c?"orange":c>50&&100>c?"yellow":"green"},GoalsController.prototype.getColor=function(a,b){var c=100*b/a;return 25>=c?"#ef512c":c>25&&50>=c?"#ff890a":c>50&&100>c?"#dbce00":"#8dc63f"},GoalsController.prototype.showThem=function(a){var b=this;!a||b.isShown||b.isShownStarted||(b.isShownStarted=!0,b.postsService.getPosts("metas_financieras").success(function(a){b.goals=a,b.isShown=!0,b.dataLoaded=!0,b.startThem(b.goals)}))},GoalsController.prototype.startThem=function(a){var b=this;a&&a.length&&angular.forEach(a,function(a){a.meta.valor_inicial=1*a.meta.valor_inicial,a.meta.meta=1*a.meta.meta,a.meta.porcentaje=1*a.meta.porcentaje/100,b.interval(function(){a.meta.valor_inicial=a.meta.valor_inicial+1},4,a.meta.meta*a.meta.porcentaje)})},GoalsController.$inject=["$interval","postsService"],controllers.controller("GoalsController",GoalsController),controllers.controller("MainController",["$scope",function(a){a.isShowThem=!1,a.showThem=function(b){!a.isShowThem&&b&&(a.isShowThem=!0)}}]);var SecondaryFeaturesController=function(a){this.postsService=a};SecondaryFeaturesController.prototype.showThem=function(a){var b=this;!a||b.isShown||b.isShownStarted||(b.isShownStarted=!0,b.postsService.getPosts("secondary_features").success(function(a){b.features=a,b.isShown=!0}))},SecondaryFeaturesController.$inject=["postsService"],controllers.controller("SecondaryFeaturesController",SecondaryFeaturesController);var SectionContentController=function(a){this.postsService=a};SectionContentController.prototype.init=function(a){var b=this;a&&b.postsService.getPost(a).success(function(a){b.page=a})},SectionContentController.$inject=["postsService"],controllers.controller("SectionContentController",SectionContentController),angular.module("misFinanzas.directives",[]).directive("changeMenu",["deviceDetector","$window","$document",function(a,b,c){return{restrict:"A",link:function(d,e){var f=angular.element(b),g=angular.element(c[0].body),h=$("html"),i="firefox"==a.browser||"ie"==a.browser?h:g;f.on("scroll",function(){if(i){var a=1*e.css("margin-top").replace("px",""),b=1*e.css("margin-bottom").replace("px",""),c=e.outerHeight()-e.outerHeight()+b+a;i.scrollTop()>c?e.addClass("smaller-menu"):e.removeClass("smaller-menu")}})}}}]).directive("owlSingleNav",[function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.isLoaded,function(a){a&&b.owlCarousel({autoPlay:!0,singleItem:!0})})}}}]).directive("enterElement",["$animate",function(a){return{restrict:"AC",link:function(b,c){a.addClass(c,"on")}}}]).directive("heightParent",["$window",function(a){return{restrict:"A",link:function(b,c){c.parent().css("min-height",c.innerHeight()+30);var d=angular.element(a);d.on("resize",function(){c.parent().css("min-height",c.innerHeight()+30)})}}}]).directive("heightParent",["$window",function(a){return{restrict:"A",link:function(b,c){c.parent().css("min-height",c.innerHeight()+30);var d=angular.element(a);d.on("resize",function(){c.parent().css("min-height",c.innerHeight()+30)})}}}]).directive("stopVideo",[function(){return{restrict:"A",link:function(a,b){b.on("hidden.bs.modal",function(){var a=b.find("iframe");a.attr("src",a.attr("src"))})}}}]).directive("addIcon",[function(){return{restrict:"A",link:function(a,b){var c=b.hasClass("widget_categories"),d=b.find(".widget-title");c&&d.prepend('<span><i class="fa fa-tag"></i></span>')}}}]).directive("scrollAnimate",["deviceDetector","$window","$document",function(a,b,c){return{restrict:"A",link:function(d,e){if("safari"!=a.browser){var f=e.offset().top-400,g=e.find(".phone"),h=angular.element(b),i=angular.element(c[0].body),j=$("html"),k="firefox"==a.browser||"ie"==a.browser?j:i,l=100,m=l,n=0;g.css("transform","translate3d(0px, "+m+"px, 0px)"),h.on("scroll",function(){if(k&&k.scrollTop()>=f){var a=$(this).scrollTop();a>n?m>0&&m--:l>m&&m++,g.css("transform","translate3d(0px, "+m+"px, 0px)"),n=a}})}}}}]),services.factory("postsService",["$rootScope","$http",function(a,b){return{getPosts:function(c){return b.get(a.api,{params:{type:c}})},getPost:function(c){return b.get(a.api+"/"+c)}}}]);